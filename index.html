<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Creating a Design System from Scratch: Lessons learned</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/white.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
    <style>
      :root {
        --r-link-color: #0fbdcd;
      }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-markdown>
          <textarea data-template>
            <img src="static/frontendisti.jpg" width="150" />

            ## Dialog Element - Don't reinvent the wheel with modals!

            [Tomas Litera](https://literat.dev)

            <img src="static/lmc-logo.png" width="150" />

            <aside class="notes">
              - pozdravit
              - p≈ôedstavit se
            </aside>

            ---

            <img src="static/twitter-modal.png" />

            <aside class="notes">
              - ne≈æ zaƒçnu, tak chci celou tuhle p≈ôedn√°≈°ku uv√©st do spr√°vn√©ho kontextu
              - tak≈æe nejprve nƒõco o mƒõ
            </aside>

            ---

            <img src="static/html-do-that.png" />

            <a href="https://www.youtube.com/watch?v=rM1emdWTr5Q">https://www.youtube.com/watch?v=rM1emdWTr5Q</a>

            <aside class="notes">
              - zaƒç√≠nal jsem s PHP a javascriptem
              - pracoval jsem s AWS a Serverless
              - hr√°l jsem s Node.js a Reactem
              - a teƒè vytv√°≈ô√≠m design syst√©m, o kter√©m jsem je≈°tƒõ minul√Ω rok nic nevƒõdƒõl
              - tak≈æe se tak trochu pova≈æuji za fullstack√°≈ôe
            </aside>

            ---

            ### ü´Ä Anatomy

            <img src="static/modal-anatomy.png" />

            <aside class="notes">
              - teƒè u≈æ trochu v√≠c k t√©matu
              - to, o ƒçem tu budu mluvit nen√≠ jenom moje pr√°ce
              - je to pr√°ce cel√©ho t√Ωmu lid√≠
              - mo≈æn√° nƒõkter√© pozn√°v√°te ;-)
            </aside>

            ---

            ### Dialog

            <pre class="r-stretch">
              <code data-line-numbers="2,7">
                <dialog open>
                  <p>Greetings, one and all!</p>
                  <form method="dialog">
                    <button>OK</button>
                  </form>
                </dialog>
              </code>
            </pre>

            ---

            <img src="static/nonmodal-dialog.png" />

            ---

            ### Non-modal Dialog

            <img src="static/gmail-non-modal.png" />

            <aside class="notes">
              - taky bych chtƒõl zm√≠nit na √∫vod p√°r technik√°li√≠
              - cel√Ω design system vytv√°≈ô√≠me jako open source
              - a za pomoci aktu√°ln√≠ho stacku technologi√≠
              - jako t≈ôeba Nx + Lerna (ano, m√°me monorepo)
              - typescript + react
              - php + twig (jo, m√°me komponenty pro PHP, ale o tom pozdƒõji)
            </aside>

            ---

            ## Modal Dialog

            <img src="static/modal-modal.png" />

            <aside class="notes">
              - a o ƒçem to tedy bude?
              - o tom, co jsem se j√° jako v√Ωvoj√°≈ô nauƒçil o vytv√°≈ôen√≠ design syst√©m≈Ø
              - tak jdeme na to
            </aside>

            ---

            ## ü•ñ Baked in Features

            ---

            ##  Forms

            <pre class="r-stretch">
              <code data-line-numbers="5,7,8">
                <main>
                  <button id="open">Open dialog</button>
                  <dialog>
                    <form method="dialog">
                    <h1>Hello, would you like to do something cool?<h1/>
                    <button id="close" value="cancel">Go to hell!</button>
                    <button id="confirm" value="confirm">Let's go!</button>
                  </dialog>
                </main>
            </code>
            </pre>

            ---

            <pre class="r-stretch">
              <code data-line-numbers="8,12,13">
                const showButton = document.getElementById('showDialog');
                const favDialog = document.getElementById('favDialog');
                const outputBox = document.querySelector('output');

                // "Show the dialog" button opens the <dialog> modally
                showButton.addEventListener('click', () => {
                    favDialog.showModal();
                });

                // "Confirm" button of form triggers "close" on dialog because of [method="dialog"]
                favDialog.addEventListener('close', () => {
                  outputBox.value = `ReturnValue: ${favDialog.returnValue}.`;
                });
              </code>
            </pre>

            ---

            ## Native Backdrop pseudo-element

            <pre>
              <code data-trim>
                .Modal::backdrop {
                  background-color: #333333;
                  visibility: visible;
                  opacity: 1;
                }
              </code>
            </pre>

            ---

            ## üö™ Closing using Escape key

            ‚úÖ

            ---

            ## ü§∑ Something is missing

            ---

            ## üö™ Closing using Backdrop

            <img src="static/modal-dialog.png" />

            ---

            <img src="static/modal-content.png" />

            ---

            ## üõ†Ô∏è JS API

            <code>.show()</code>

            <code>.showModal()</code>
            <pre>::backdrop</pre>

            <code>.close()</code>
            <pre>dialog.returnValue</pre>

            ---

            ### üìØ Events

            <code>close</code>
            <pre>dialog.returnValue</pre>

            <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/close_event">https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/close_event</a>

            <code>cancel</code>

            <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/cancel_event">https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/cancel_event</a>

            ---

            <pre class="r-stretch">
              <code data-line-numbers="16,17,21,22">
                <script>
                  (() => {
                    const updateButton = document.getElementById("updateDetails");
                    const closeButton = document.getElementById("close");
                    const dialog = document.getElementById("favDialog");
                    dialog.returnValue = "favAnimal";
                    function openCheck(dialog) {
                      if (dialog.open) {
                        console.log("Dialog open");
                      } else {
                        console.log("Dialog closed");
                      }
                    }
                    // Update button opens a modal dialog
                    updateButton.addEventListener("click", () => {
                      dialog.showModal();
                      openCheck(dialog);
                    });
                    // Form close button closes the dialog box
                    closeButton.addEventListener("click", () => {
                      dialog.close("animalNotChosen");
                      openCheck(dialog);
                    });
                  })();
                </script>
              </code>
            </pre>

            ---

            ## ‚öõÔ∏è React

            ---

            <pre class="r-stretch">
              <code data-line-numbers="3,7,9,14,16,18,20,23">
                function Modal({ children, open, onRequestClose }) {
                  const dialogRef = React.useRef(null);
                  React.useEffect(() => {
                    const dialogNode = dialogRef.current;
                    if (open) {
                      dialogNode.showModal();
                    } else {
                      dialogNode.close();
                    }
                  }, [open])
                  React.useEffect(() => {
                    const dialogNode = dialogRef.current
                    const handleCancel = (event) => {
                      event.preventDefault();
                      onRequestClose();
                    }
                    dialogNode.addEventListener('cancel', handleCancel);
                    return () => {
                      dialogNode.removeEventListener('cancel', handleCancel);
                    }
                  }, [onRequestClose]);
                  return <dialog ref={dialogRef}>{children}</dialog>;
                }
              </code>
            </pre>

            ---

            ### ü™ù And use hooks

            <ul>
              <li class="fragment">useDialog - Dialog state</li>
              <li class="fragment">useOnClickOutside - Backdrop click</li>
              <li class="fragment">useCancelEvent - Escape key</li>
            </ul>
            ---

            <pre>
              <code>
                <script type="text/template">
                  <Dialog
                    isOpen={isOpen}
                    onClose={onClose}
                  >
                    {children}
                  </Dialog>
              </script>
              </code>
            </pre>

            ---

            ## ü•° Takeaways

            ---

            ### ‚ûï Advantages

            <ul>
            <li class="fragment">Minimal Javascript</li>
            <li class="fragment">accesibility baked in</li>
            <li class="fragment">::backdrop pseudo-element</li>
            <li class="fragment">form method="dialog"</li>
            <li class="fragment">Escape key closes the dialog</li>
          </ul>

            ---

            ### ‚ûñ Disadvantages

            <ul>
            <li class="fragment">fancy features require more JS</li>
            <li class="fragment">clicking on backdrop does not close the dialog</li>
            <li class="fragment">some accessibility issue regarding autofocus</li>
            </ul>

            ---

            ### üßë‚Äçü¶º Accessibility

            <img src="static/dialog-caniuse.png" />

            <aside class="notes">
              - jen≈æe filip mluvil o anal√Ωz√°ch a mƒõ≈ôen√≠ a dal≈°√≠ch vƒõcech
              - tam my je≈°tƒõ nejsem
              - my se pohybujeme v tom men≈°√≠m kruhu
              - dokumentace, tooling a k√≥d
              - a o tom to dnes prim√°rnƒõ bude
            </aside>

            ---

            # ü§ù Credit

            Adam Kudrna + Kate≈ôina Dlouh√°


            CZ: <a href="https://frontend.garden/element-dialog-nevymyslej-znovu-modal">https://frontend.garden/element-dialog-nevymyslej-znovu-modal</a>

            EN: <a href="https://literat.dev/blog/2023-04-11/dialog-element-don't-reinvent-the-wheel-with-modals!/">https://literat.dev/blog/2023-04-11/dialog-element-don't-reinvent-the-wheel-with-modals!/</a>

            ---

            # üëã

            No robot (AI) were harmed while fabricating these slides and posts.

            <a href="https://dialog-do-not-reinvent-modal.netlify.app/">https://dialog-do-not-reinvent-modal.netlify.app/</a>

            <aside class="notes">
              - dƒõkuji za pozornost
            </aside>

            ---

            <img src="static/spirit.png" />

            <a href="https://github.com/lmc-eu/spirit-design-system">https://github.com/lmc-eu/spirit-design-system</a>

          </textarea>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ],
        slideNumber: 'c/t'
      });
    </script>
  </body>
</html>
