<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Creating a Design System from Scratch: Lessons learned</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/white.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
    <style>
      :root {
        --r-link-color: #0fbdcd;
      }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-markdown>
          <textarea data-template>
            <img src="static/frontendisti.jpg" width="150" />

            ## Dialog Element - Don't reinvent the wheel with modals!

            [Tomas Litera](https://literat.dev)

            <img src="static/lmc-logo.png" width="150" />

            <aside class="notes">
              - pozdravit
              - p≈ôedstavit se
            </aside>

            ---

            <img src="static/twitter-modal.png" />

            <aside class="notes">
              - dialogy jsou v≈°ude
              - ≈ôe≈°√≠ interakci s u≈æivatelem
              - maj√≠ r≈Øzn√° jm√©na, modal, dailog, drawev, offcanvas, popup
              - ot√°zka do pl√©na: kdo u≈æ nƒõkdy implementoval modal
              - a jak√© jsou nƒõjvƒõt≈°√≠ pot√≠≈æe?
              - uk√°≈æeme si jak si ≈æivot zjednodu≈°≈°it
            </aside>

            ---

            <img src="static/html-do-that.png" />

            <a href="https://www.youtube.com/watch?v=rM1emdWTr5Q">https://www.youtube.com/watch?v=rM1emdWTr5Q</a>

            <aside class="notes">
              - k pou≈æit√≠ n√°s motivovala p≈ôedn√°≈°ka od Tom√°≈°e Pusteln√≠ka
            </aside>

            ---

            ### ü´Ä Anatomy

            <img src="static/modal-anatomy.png" />

            <aside class="notes">
              - jak vypad√° dne≈°n√≠ modal z pohledu designu a co um√≠
              - interakce, tlaƒç√≠tka, zav√≠r√°n√≠
              - zav√≠r√°n√≠ na klik, escape, backdrop
            </aside>

            ---

            ### Dialog

            <pre class="r-stretch">
              <code data-line-numbers="2,7">
                <dialog open>
                  <p>Greetings, one and all!</p>
                  <form method="dialog">
                    <button>OK</button>
                  </form>
                </dialog>
              </code>
            </pre>

            <aside class="notes">
              - seznamte se, nov√Ω dialog element
              - v z√°kladu nem√° skoro ≈æ√°dn√© atributy
            </aside>

            ---

            <img src="static/nonmodal-dialog.png" />

            <aside class="notes">
              - je v takzvan√©m nemod√°ln√≠m stavu
            </aside>

            ---

            ### Non-modal Dialog

            <img src="static/gmail-non-modal.png" />

            <aside class="notes">
              - znamen√° to, ≈æe je povolen√° interakce se str√°nkou
              - nejd≈ô√≠ve jsem neznal moc pou≈æit√≠, ale pak to zaƒçalo d√°vat smysl
              - r≈Øzn√© panely ve slo≈æitƒõj≈°√≠ch aplikac√≠ch al√° figma a dal≈°√≠ch
              - zde uk√°zka z gmailu
            </aside>

            ---

            ## Modal Dialog

            <img src="static/modal-modal.png" />

            <aside class="notes">
              - pak tu m√°me dialog v mod√°ln√≠ stavu
              - interakce se zbytkem str√°nky je zak√°zan√°
            </aside>

            ---

            ## ü•ñ Baked in Features

            <aside class="notes">
              - co jsou teda ty skvƒõl√© vƒõci, co n√°m ten element p≈ôin√°≈°√≠?
            </aside>

            ---

            ##  Forms

            <pre class="r-stretch">
              <code data-line-numbers="5,7,8">
                <main>
                  <button id="open">Open dialog</button>
                  <dialog>
                    <form method="dialog">
                    <h1>Hello, would you like to do something cool?<h1/>
                    <button id="close" value="cancel">Go to hell!</button>
                    <button id="confirm" value="confirm">Let's go!</button>
                  </dialog>
                </main>
            </code>
            </pre>

            <aside class="notes">
              - form method dialog
              - pou≈æit√≠ formul√°≈ô≈Ø
            </aside>

            ---

            <pre class="r-stretch">
              <code data-line-numbers="8,12,13">
                const showButton = document.getElementById('showDialog');
                const favDialog = document.getElementById('favDialog');
                const outputBox = document.querySelector('output');

                // "Show the dialog" button opens the <dialog> modally
                showButton.addEventListener('click', () => {
                    favDialog.showModal();
                });

                // "Confirm" button of form triggers "close" on dialog because of [method="dialog"]
                favDialog.addEventListener('close', () => {
                  outputBox.value = `ReturnValue: ${favDialog.returnValue}.`;
                });
              </code>
            </pre>

            <aside class="notes">
              - jak z√≠skat n√°vratovou hodnotu
            </aside>

            ---

            ## Native Backdrop pseudo-element

            <pre>
              <code data-trim>
                .Modal::backdrop {
                  background-color: #333333;
                  visibility: visible;
                  opacity: 1;
                }
              </code>
            </pre>

            <aside class="notes">
              - nativn√≠ podporu pro backdrop
            </aside>

            ---

            ## üö™ Closing using Escape key

            ‚úÖ

            <aside class="notes">
              - automatick√© zav√≠r√°n√≠ p≈ôes escape kl√°vesu
            </aside>

            ---

            ## ü§∑ Something is missing

            <aside class="notes">
              - ale nƒõco n√°m st√°le chyb√≠
            </aside>

            ---

            ## üö™ Closing using Backdrop

            <img src="static/modal-dialog.png" />

            <aside class="notes">
              - a to zav√≠r√°n√≠ kliku na backdrop
              - zde pozor na implementaci pro rozd√≠lov√© oblasti
            </aside>

            ---

            <img src="static/modal-content.png" />

            <aside class="notes">
              - dialog m√° cel√Ω top layer, je pot≈ôeba se zamƒõ≈ôit na vnit≈ôek
            </aside>

            ---

            ## üõ†Ô∏è JS API

            <code>.show()</code>

            <code>.showModal()</code>
            <pre>::backdrop</pre>

            <code>.close()</code>
            <pre>dialog.returnValue</pre>

            <aside class="notes">
              - teƒè u≈æ jenom zrekapitulujeme JS API
              - ta prvn√≠ metoda otev√≠r√° nemod√°ln√≠ stav
            </aside>

            ---

            ### üìØ Events

            <code>close</code>
            <pre>dialog.returnValue</pre>

            <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/close_event">https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/close_event</a>

            <code>cancel</code>

            <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/cancel_event">https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/cancel_event</a>

            <aside class="notes">
              - a ud√°losti
            </aside>

            ---

            <pre class="r-stretch">
              <code data-line-numbers="16,17,21,22">
                <script>
                  (() => {
                    const updateButton = document.getElementById("updateDetails");
                    const closeButton = document.getElementById("close");
                    const dialog = document.getElementById("favDialog");
                    dialog.returnValue = "favAnimal";
                    function openCheck(dialog) {
                      if (dialog.open) {
                        console.log("Dialog open");
                      } else {
                        console.log("Dialog closed");
                      }
                    }
                    // Update button opens a modal dialog
                    updateButton.addEventListener("click", () => {
                      dialog.showModal();
                      openCheck(dialog);
                    });
                    // Form close button closes the dialog box
                    closeButton.addEventListener("click", () => {
                      dialog.close("animalNotChosen");
                      openCheck(dialog);
                    });
                  })();
                </script>
              </code>
            </pre>

            <aside class="notes">
              - zde je vidƒõt, jak se na nƒõ navƒõsit
            </aside>

            ---

            ## ‚öõÔ∏è React

            <aside class="notes">
              - a nesm√≠me zapomenout na React, kde n√°m tento element tak√© hodnƒõ pom≈Ø≈æe
            </aside>

            ---

            <pre class="r-stretch">
              <code data-line-numbers="3,7,9,14,16,18,20,23">
                function Modal({ children, open, onRequestClose }) {
                  const dialogRef = React.useRef(null);
                  React.useEffect(() => {
                    const dialogNode = dialogRef.current;
                    if (open) {
                      dialogNode.showModal();
                    } else {
                      dialogNode.close();
                    }
                  }, [open])
                  React.useEffect(() => {
                    const dialogNode = dialogRef.current
                    const handleCancel = (event) => {
                      event.preventDefault();
                      onRequestClose();
                    }
                    dialogNode.addEventListener('cancel', handleCancel);
                    return () => {
                      dialogNode.removeEventListener('cancel', handleCancel);
                    }
                  }, [onRequestClose]);
                  return <dialog ref={dialogRef}>{children}</dialog>;
                }
              </code>
            </pre>

            ---

            ### ü™ù And use hooks

            <ul>
              <li class="fragment">useDialog - Dialog state</li>
              <li class="fragment">useOnClickOutside - Backdrop click</li>
              <li class="fragment">useCancelEvent - Escape key</li>
            </ul>

            <aside class="notes">
              - celou implementaci lze kr√°snƒõ rozdƒõlit do hook≈Ø
            </aside>

            ---

            <pre>
              <code>
                <script type="text/template">
                  <Dialog
                    isOpen={isOpen}
                    onClose={onClose}
                  >
                    {children}
                  </Dialog>
              </script>
              </code>
            </pre>

            <aside class="notes">
              - a pak u≈æ je to jedoduch√° komponenta
            </aside>

            ---

            ## ü•° Takeaways

            <aside class="notes">
              - co si z toho teda odn√©st
            </aside>

            ---

            ### ‚ûï Advantages

            <ul>
            <li class="fragment">Minimal Javascript</li>
            <li class="fragment">accesibility baked in</li>
            <li class="fragment">::backdrop pseudo-element</li>
            <li class="fragment">form method="dialog"</li>
            <li class="fragment">Escape key closes the dialog</li>
          </ul>

            ---

            ### ‚ûñ Disadvantages

            <ul>
            <li class="fragment">fancy features require more JS</li>
            <li class="fragment">clicking on backdrop does not close the dialog</li>
            <li class="fragment">some accessibility issue regarding autofocus</li>
            </ul>

            ---

            ### üßë‚Äçü¶º Accessibility

            <img src="static/dialog-caniuse.png" />

            <aside class="notes">
              - ji≈æ nyn√≠ se d√° pou≈æ√≠vat ve v≈°ech prohl√≠≈æeƒç√≠ch
            </aside>

            ---

            # ü§ù Credit

            Adam Kudrna + Kate≈ôina Dlouh√°


            CZ: <a href="https://frontend.garden/element-dialog-nevymyslej-znovu-modal">https://frontend.garden/element-dialog-nevymyslej-znovu-modal</a>

            EN: <a href="https://literat.dev/blog/2023-04-11/dialog-element-don't-reinvent-the-wheel-with-modals!/">https://literat.dev/blog/2023-04-11/dialog-element-don't-reinvent-the-wheel-with-modals!/</a>

            <aside class="notes">
              - a chci podƒõkovat za spolupr√°ci na ƒçl√°nc√≠ch
            </aside>

            ---

            # üëã

            No robot (AI) were harmed while fabricating these slides and posts.

            <a href="https://dialog-do-not-reinvent-modal.netlify.app/">https://dialog-do-not-reinvent-modal.netlify.app/</a>

            <aside class="notes">
              - dƒõkuji za pozornost
            </aside>

            ---

            <img src="static/spirit.png" />

            <a href="https://github.com/lmc-eu/spirit-design-system">https://github.com/lmc-eu/spirit-design-system</a>

          </textarea>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ],
        slideNumber: 'c/t'
      });
    </script>
  </body>
</html>
